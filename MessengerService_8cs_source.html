<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VPR_Messenger: Messenger/Messenger.Core/Services/MessengerService.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VPR_Messenger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('MessengerService_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MessengerService.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MessengerService_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceMessenger.html">Messenger</a>.<a class="code" href="namespaceMessenger_1_1Core.html">Core</a>.<a class="code" href="namespaceMessenger_1_1Core_1_1Helpers.html">Helpers</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespaceMessenger.html">Messenger</a>.<a class="code" href="namespaceMessenger_1_1Core.html">Core</a>.<a class="code" href="namespaceMessenger_1_1Core_1_1Models.html">Models</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> System.IO;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> System.Threading.Tasks;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> Serilog;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> Serilog.Context;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> System.IO;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> Newtonsoft.Json.Linq;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceMessenger_1_1Core_1_1Services.html">Messenger.Core.Services</a></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html">   19</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html">MessengerService</a></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    {</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a166cc663374b23a6f3908442487df9b1">   24</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a> <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a> =&gt; <a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1Singleton.html">Singleton&lt;SignalRService&gt;</a>.<a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1Singleton.html#a0d7f2cd0eabd1bf12e8a5aae626e7de8">Instance</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">   26</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> ILogger <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a> =&gt; <a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1GlobalLogger.html">GlobalLogger</a>.<a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1GlobalLogger.html#a03dad52937c166e46982733aa24afdf1">Instance</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">        #region Initializers</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a634d8a2e7a0e69c93627309674d514d6">   36</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IList&lt;Team&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a634d8a2e7a0e69c93627309674d514d6">Initialize</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> connectionString = <span class="keyword">null</span>)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>,<span class="stringliteral">&quot;Initialize&quot;</span>);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}&quot;</span>);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aad61da6c4bea9555625dd0b1542059e4">Initialize</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a1aee81da19161b62727e27928dae7e54">OpenConnection</a>(userId);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            IEnumerable&lt;Team&gt; teams = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ad0fbb59d504d0bcba5a0be169e7755be">GetAllTeamsByUserId</a>(userId);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <span class="comment">/* EXIT IF NO TEAM **/</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <span class="keywordflow">if</span> (teams == <span class="keyword">null</span> || teams.Count() &lt;= 0)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;No teams found for the current user&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: null&quot;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Loaded the following teams for the current user: {string.Join(&quot;</span>, <span class="stringliteral">&quot;, teams)}&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            List&lt;Team&gt; result = <span class="keyword">new</span> List&lt;Team&gt;();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team <span class="keywordflow">in</span> teams)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aba655b98194b39e13d84804e586b0f34">JoinTeam</a>(userId, team.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html#a02c394b8983392d4bbfe1484d37e0480">Id</a>.ToString());</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                result.Add(team);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Connected the current user to the team {team.Id}&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">        #region Message</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#abab5dfc717e70a1c8acb5e25981fe19a">   86</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;Message&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#abab5dfc717e70a1c8acb5e25981fe19a">GetMessages</a>(uint channelId)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;LoadMessages&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameter teamId={channelId}&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            var messages = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af04546bd31c5ce91f3cbad2cb9ebe5f5">RetrieveMessages</a>(channelId);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {string.Join(&quot;</span>, <span class="stringliteral">&quot;, messages)}&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">return</span> messages;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac2a043d3fe88d76974f1c980dc20d320">  100</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Message&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac2a043d3fe88d76974f1c980dc20d320">GetMessage</a>(uint messageId)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;LoadMessages&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameter messageId={messageId}&quot;</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            var message = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">GetMessage</a>(messageId);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {message}&quot;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">return</span> message;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a8ee0203eb531c86cfaec43beb5484e5b">  119</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a8ee0203eb531c86cfaec43beb5484e5b">SendMessage</a>(<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html">Message</a> message, uint teamId)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>,<span class="stringliteral">&quot;SendMessage&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameter message={message}&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="comment">// Check the validity of the message</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> (!ValidateMessage(message))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;message object has been determined invalid&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="comment">// Upload attachments</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            var blobNames = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a9894915afacb8c77951c1d66ef06137e">UploadFileData</a> != <span class="keyword">null</span> &amp;&amp; message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a9894915afacb8c77951c1d66ef06137e">UploadFileData</a>.Count &gt; 0)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="classMessenger_1_1Core_1_1Models_1_1UploadData.html">UploadData</a> file <span class="keywordflow">in</span> message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a9894915afacb8c77951c1d66ef06137e">UploadFileData</a>)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    <span class="keywordtype">string</span> blob = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html">FileSharingService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html#a55105132f467d4e4b826cb2648f4e7dc">Upload</a>(file);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    blobNames.Add(blob);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;added the following attachments to the message: {string.Join(&quot;</span>,<span class="stringliteral">&quot;, message.UploadFileData)}&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">// Save to database</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            uint? <span class="keywordtype">id</span> = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a89d9db60d865b366f1dac8720e5ed7c7">CreateMessage</a>(</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#ae07b2c690ab85f6e2e6596ef99c24331">RecipientId</a>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a97fed67252ac0a193529ffb55b16d061">SenderId</a>,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a746296aacb69894c78eda52a9664a0a6">Content</a>,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a53e8deffa31b5af4fe93c0cc43b5b8c8">ParentMessageId</a>,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                blobNames);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a4f83a3ddb5cb8475351010fe724a3a3c">Id</a> = (uint)<span class="keywordtype">id</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a6c39835894af32e050e7c77c161fef68">SendMessage</a>(message, teamId);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Broadcasts the following message to the hub: {message}&quot;</span>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae19f1d2a853d7afc9c0ea0aee96bcd8c">  176</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae19f1d2a853d7afc9c0ea0aee96bcd8c">DeleteMessage</a>(uint messageId, uint teamId)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;DeleteMessage&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters messageId={messageId}&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            var result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            var message = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">GetMessage</a>(messageId);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            var blobFileNames = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a59979a89a47fed52370aaed56e57a359">GetBlobFileNamesOfAttachments</a>(messageId);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> (blobFileNames != <span class="keyword">null</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    &amp;&amp; blobFileNames?.Count() &gt; 0)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">foreach</span> (var blobFileName <span class="keywordflow">in</span> blobFileNames)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    result &amp;= await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html">FileSharingService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html#a2fef494da70066b36819c8db04e57644">Delete</a>(blobFileName);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#afb8a4fb96fd86c9b73618fd71888b95c">DeleteMessage</a>(message, teamId);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            result &amp;= await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a9baa767efdc37243db34bd079866316a">DeleteMessage</a>(messageId);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a3bf01add80c82c5d19865a5353d65e79">  212</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a3bf01add80c82c5d19865a5353d65e79">UpdateMessage</a>(uint messageId, <span class="keywordtype">string</span> newContent, uint teamId)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UpdateMessage&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters messageId={messageId}, newContent={newContent}&quot;</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a5e6aee448ff9c2ef9d78ea6679eb73d9">EditMessage</a>(messageId, newContent);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            var message = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">GetMessage</a>(messageId);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab5c5ca0878e7e9ae5e04e6323cdc251d">UpdateMessage</a>(message, teamId);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a62565e9e6eac3e92e65b7ec80ef61652">  229</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;Reaction&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a62565e9e6eac3e92e65b7ec80ef61652">GetReactions</a>(uint messageId)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;GetReactions&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters messageId={messageId}&quot;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a7091ab4d20a2f23602a4710020dff3b7">RetrieveReactions</a>(messageId);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a77ef5dd21275ec31699255e8333d9d36">  249</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Reaction&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a77ef5dd21275ec31699255e8333d9d36">CreateMessageReaction</a>(uint messageId, <span class="keywordtype">string</span> userId, uint teamId, <span class="keywordtype">string</span> reaction)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;AddReaction&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters messageId={messageId}, userId={userId}, reaction={reaction}&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            var message = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">GetMessage</a>(messageId);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">if</span> (message == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Could not retrieve the message from the database&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            uint reactionId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#ac5ee6f4f0148cc9890feb30bfe047d1b">AddReaction</a>(messageId, userId, reaction);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Reaction.html">Reaction</a> result = (await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a7091ab4d20a2f23602a4710020dff3b7">RetrieveReactions</a>(messageId))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                .Single(r =&gt; r.Id == reactionId);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a581b9141a95ba76a60d961f514e615a8">UpdateMessageReactions</a>(message, teamId);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#adc8b726c3ce2e48801aa22b7074a8e5a">  282</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Reaction&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#adc8b726c3ce2e48801aa22b7074a8e5a">DeleteMessageReaction</a>(uint messageId, <span class="keywordtype">string</span> userId, uint teamId, <span class="keywordtype">string</span> reaction)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RemoveReaction&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters messageId={messageId}, userId={userId}, reaction={reaction}&quot;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html">Message</a> message = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">GetMessage</a>(messageId);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Reaction.html">Reaction</a> userReaction = (await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a7091ab4d20a2f23602a4710020dff3b7">RetrieveReactions</a>(messageId))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                .Single(r =&gt; r.UserId == userId);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (message == <span class="keyword">null</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                || userReaction == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Could not retrieve the message from the database&quot;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordtype">bool</span> isSuccess = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">MessageService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a92c6cd5d25343849ca12038d5ae67860">RemoveReaction</a>(message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a4f83a3ddb5cb8475351010fe724a3a3c">Id</a>, userId, reaction);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span> (isSuccess)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a581b9141a95ba76a60d961f514e615a8">UpdateMessageReactions</a>(message, teamId);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {userReaction}&quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> userReaction;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">        #region Team</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a0bbf126af4adc2b648860c94567f0acb">  320</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;Team&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a0bbf126af4adc2b648860c94567f0acb">GetTeams</a>(<span class="keywordtype">string</span> userId)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;LoadTeams&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            var teams = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ad0fbb59d504d0bcba5a0be169e7755be">GetAllTeamsByUserId</a>(userId);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {string.Join(&quot;</span>, <span class="stringliteral">&quot;, teams)}&quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">return</span> teams != <span class="keyword">null</span> ? teams : Enumerable.Empty&lt;<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a>&gt;();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2491aff81294c379e49a4e7f9a6a0258">  338</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Team&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2491aff81294c379e49a4e7f9a6a0258">GetTeam</a>(uint teamId)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;GetTeam&quot;</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            var team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {team}&quot;</span>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">return</span> team;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a112a6e879f278a7d16a0f6b3911e500d">  358</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;uint?&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a112a6e879f278a7d16a0f6b3911e500d">CreateTeam</a>(<span class="keywordtype">string</span> creatorId, <span class="keywordtype">string</span> teamName, <span class="keywordtype">string</span> teamDescription = <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>,<span class="stringliteral">&quot;CreateTeam&quot;</span>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters creatorId={creatorId}, teamName={teamName}, teamDescription={teamDescription}&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="comment">// Create team and save to database</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            uint? teamId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a250de2dabac7790655a8888d04ff13fe">CreateTeam</a>(teamName, teamDescription);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (teamId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not create the team&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: null&quot;</span>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// Create membership for the creator and save to database, also make him the</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="comment">// admin</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a71e7113d4f2bf94929884d5cbb5ca7df">AddMember</a>(creatorId, (uint)teamId);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ae5f722037537d2b09850eeae0b6d3117">AddRole</a>(<span class="stringliteral">&quot;admin&quot;</span>, (uint)teamId, <span class="stringliteral">&quot;CD5C5C&quot;</span>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ac7e71844865b0a106d5d36e6d0221452">AssignRole</a>(<span class="stringliteral">&quot;admin&quot;</span>, creatorId, (uint)teamId);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="comment">// Grant admin all permissions</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordtype">bool</span> grantedAllPermissions = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">foreach</span> (var permission <span class="keywordflow">in</span> Enum.GetValues(typeof(<a class="code" href="namespaceMessenger_1_1Core_1_1Models.html#a1019aae76184edeb4a742cff2f260be4">Permissions</a>)).Cast&lt;Permissions&gt;())</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                uint? teamRoleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4f904f5163e93e69a33be7677a4c71cf">GrantPermission</a>(teamId.Value, <span class="stringliteral">&quot;admin&quot;</span>, permission);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                grantedAllPermissions &amp;= teamRoleId != <span class="keyword">null</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="comment">// Create main channel</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Added the user identified by {creatorId} to the team identified by {(uint)teamId}&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            uint? channelId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#ae9388aa7e8ae52ab9236e67b705cc3dc">CreateChannel</a>(<span class="stringliteral">&quot;main&quot;</span>, teamId.Value);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">if</span> (channelId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not create the team&#39;s main channel&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>((uint)teamId);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> (team == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not retrieve the team from the server&quot;</span>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: null&quot;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Created a channel identified by ChannelId={channelId} in the team identified by TeamId={teamId.Value}&quot;</span>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aba655b98194b39e13d84804e586b0f34">JoinTeam</a>(creatorId, team.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html#a02c394b8983392d4bbfe1484d37e0480">Id</a>.ToString());</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ad1c32727c383ca4618cc41950d28b463">CreateTeam</a>(team);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Joined the hub of the team identified by {teamId}&quot;</span>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">return</span> teamId;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a194eafdd3ac6fcb3ed35b52f1b0ad1df">  434</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a194eafdd3ac6fcb3ed35b52f1b0ad1df">UpdateTeamName</a>(<span class="keywordtype">string</span> teamName, uint teamId)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;ChangeTeamName&quot;</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamName={teamName}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a455351a1c7e584a9a67932fe3e2a4ec4">ChangeTeamName</a>(teamId, teamName);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            var team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a59c0097a80abef4c636a0477e2016791">UpdateTeam</a>(team);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ab01f2292133ce2d756c758899ef30dc7">  456</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Team&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ab01f2292133ce2d756c758899ef30dc7">DeleteTeam</a>(uint teamId)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;DeleteTeam&quot;</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            var team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            var didDeleteChannels = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a0f10eb2055c07b1cb10d3ce3653b2130">RemoveAllChannels</a>(teamId);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            var didDeleteTeamAndMemberships = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4b0651f74678710a739ee75884aaa075">DeleteTeam</a>(teamId);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            var result = didDeleteTeamAndMemberships &amp;&amp; didDeleteChannels;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a004748ef7c1f25241d192f89a48d02f2">DeleteTeam</a>(team);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {team}&quot;</span>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">return</span> team;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: null&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ad3d3c6f0b20b3762ced93658bdc76055">  491</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ad3d3c6f0b20b3762ced93658bdc76055">UpdateTeamDescription</a>(<span class="keywordtype">string</span> teamDescription, uint teamId)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;ChangeTeamDescription&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamDescription={teamDescription}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afc9dcbc65164fe083249096e35bb0b3e">ChangeTeamDescription</a>(teamId, teamDescription);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            var team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a59c0097a80abef4c636a0477e2016791">UpdateTeam</a>(team);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a439978fcd19b38d516b893cd9f9515a7">  514</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;uint?&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a439978fcd19b38d516b893cd9f9515a7">CreateChannel</a>(<span class="keywordtype">string</span> channelName, uint teamId)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;CreateChannel&quot;</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters channelName={channelName}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            var channelId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#ae9388aa7e8ae52ab9236e67b705cc3dc">CreateChannel</a>(channelName, teamId);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">if</span> (channelId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not create the channel&quot;</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            var channel = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#aced27456c4cba135d277f0c3f8cd4df8">GetChannel</a>(channelId.Value);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a9c752d12a6fc38712f7a1e75c1c50ade">CreateChannel</a>(channel);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span> channelId;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aeef9238a7ed6bcd0bd1a5d4c2031b443">  544</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;Channel&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aeef9238a7ed6bcd0bd1a5d4c2031b443">DeleteChannel</a>(uint channelId)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RemoveChannel&quot;</span>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters channelId={channelId}&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a384e2db5887c5dcedbf123342ae2c881">RemoveChannel</a>(channelId);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            var channel = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#aced27456c4cba135d277f0c3f8cd4df8">GetChannel</a>(channelId);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab9abb703a9beab10d43d6d02cfcf61a2">DeleteChannel</a>(channel);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">return</span> channel;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa5e022419ec275539459420f0f144619">  567</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa5e022419ec275539459420f0f144619">RenameChannel</a>(<span class="keywordtype">string</span> channelName, uint channelId)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RenameChannel&quot;</span>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters channelName={channelName}, channelId={channelId}&quot;</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a850a1ce338b5dc2e9dfd71a578a7a1d0">RenameChannel</a>(channelName, channelId);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            var channel = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#aced27456c4cba135d277f0c3f8cd4df8">GetChannel</a>(channelId);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a36a590a0333843e932caea44065533db">UpdateChannel</a>(channel);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a80ae9c3ea6da61093a916f209cd17ab5">  590</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;Channel&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a80ae9c3ea6da61093a916f209cd17ab5">GetChannelsForTeam</a>(uint teamId)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;GetChannelsForTeam&quot;</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            var channels = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a3280e25fe2932519743b83161a423624">GetAllChannelsByTeamId</a>(teamId);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {string.Join(&quot;</span>, <span class="stringliteral">&quot;, channels)}&quot;</span>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">return</span> channels != <span class="keyword">null</span> ? channels : Enumerable.Empty&lt;<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Channel.html">Channel</a>&gt;();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">        #region Member</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae1ae15e99206f5fdea267b84b00dfd58">  612</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;User&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae1ae15e99206f5fdea267b84b00dfd58">GetTeamMembers</a>(uint teamId)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;LoadTeamMembers&quot;</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            var members = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aa57d048a3cfd663ed2cb88eee57e0f12">GetAllMembers</a>(teamId);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {members}&quot;</span>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">return</span> members != <span class="keyword">null</span> ? members : Enumerable.Empty&lt;<a class="code" href="classMessenger_1_1Core_1_1Models_1_1User.html">User</a>&gt;();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa4efb7021eae3d556c8f8ec858613e43">  632</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;User&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa4efb7021eae3d556c8f8ec858613e43">GetUserWithNameId</a>(<span class="keywordtype">string</span> username, uint nameId)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;GetUserWithNameId&quot;</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters username={username}, nameId={nameId}&quot;</span>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            var user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(username, nameId);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {user}&quot;</span>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="keywordflow">return</span> user;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa690d0e394ac175474fb41e071822677">  652</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa690d0e394ac175474fb41e071822677">SendInvitation</a>(<span class="keywordtype">string</span> userId, uint teamId)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>,<span class="stringliteral">&quot;InviteUser&quot;</span>);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1User.html">User</a> user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">if</span> (user == <span class="keyword">null</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                || team == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Invalid User/Team&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="comment">// Create membership for the user and save to database</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordtype">bool</span> isSuccess = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a71e7113d4f2bf94929884d5cbb5ca7df">AddMember</a>(userId, teamId);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">if</span> (!isSuccess)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Could not save the user to the members list&quot;</span>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="comment">// Add user to the hub group if the user is connected (will be handled in SignalR)</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a048ca72ded57e483b972f7989d67be21">SendInvitation</a>(user, team);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="comment">// Send notification to target user</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            JObject notificationMessage = await <a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder.html">NotificationMessageBuilder</a>.<a class="code" href="classMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder.html#ac8392674ac6a35057ee129ec78db6d81">MakeInvitedToTeamNotificationMessage</a>(teamId);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            uint? notificationId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1NotificationService.html">NotificationService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1NotificationService.html#a894dd1988c7594206cc04578b85fb52d">SendNotification</a>(userId, notificationMessage);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="keywordflow">if</span> (notificationId != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Notification.html">Notification</a> notification = <span class="keyword">new</span> <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Notification.html">Notification</a>()</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    Id = (uint)notificationId,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    RecipientId = userId,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html">Message</a> = notificationMessage,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    CreationTime = DateTime.Now</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                };</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#af3662fa4966a99e3a1010fe071e8f690">SendNotificationToUser</a>(notification);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a70dac26bef9f6990e399b887af88c401">  713</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a70dac26bef9f6990e399b887af88c401">RemoveMember</a>(<span class="keywordtype">string</span> userId, uint teamId)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RemoveUser&quot;</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1User.html">User</a> user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="keywordflow">if</span> (user == <span class="keyword">null</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                || team == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Invalid User/Team&quot;</span>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="comment">// Create membership for the user and save to database</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a19c94e4d0833b3713482f344c5d98fec">RemoveMember</a>(userId, teamId);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab32779f00eba8b3b135b5d44eecbf329">RemoveMember</a>(user, team);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a03e8e675a894e551aeaa79629a9877d3">  746</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a03e8e675a894e551aeaa79629a9877d3">UpdateUserEmail</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> newEmail)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UpdateUserEmail&quot;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, newEmail={newEmail}&quot;</span>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#accfe05fb1b2837328b6ec4317fb895c8">UpdateUserMail</a>(userId, newEmail);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            var user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aaf50de35c5aaf275e3a04c2888995ee8">UpdateUser</a>(user);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#af39da3130ead71c475843f078e776256">  769</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#af39da3130ead71c475843f078e776256">UpdateUserUsername</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> newUsername)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UpdateUserUsername&quot;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, username={newUsername}&quot;</span>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a0056d218815cf8f2c92a5b5840552199">UpdateUsername</a>(userId, newUsername);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            var user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aaf50de35c5aaf275e3a04c2888995ee8">UpdateUser</a>(user);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a99ad70a09c5547faecddf248c8146266">  792</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a99ad70a09c5547faecddf248c8146266">UpdateUserBio</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> newBio)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UpdateUserBio&quot;</span>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, newBio={newBio}&quot;</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a5c83744b1bb2d6e804cf882fba5aa4c2">UpdateUserBio</a>(userId, newBio);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            var user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aaf50de35c5aaf275e3a04c2888995ee8">UpdateUser</a>(user);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9a9ee61c44d1255f0913e617ed04aeda">  814</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9a9ee61c44d1255f0913e617ed04aeda">UpdateUserPhoto</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> newPhotoURL)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UpdateUserPhoto&quot;</span>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, newPhotoURL={newPhotoURL}&quot;</span>);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            var result = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a3755811adc98c86c8434f57a785acdb8">UpdateUserPhoto</a>(userId, newPhotoURL);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            var user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aaf50de35c5aaf275e3a04c2888995ee8">UpdateUser</a>(user);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {result}&quot;</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9738b95bd73dfddb38fb8c0e78f75829">  831</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;IEnumerable&lt;TeamRole&gt;&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9738b95bd73dfddb38fb8c0e78f75829">GetRolesList</a>(uint teamId, <span class="keywordtype">string</span> userId)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            IEnumerable&lt;TeamRole&gt; roles = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ab431c7fd69522089e69c7c2e3398e953">GetUsersRoles</a>(teamId, userId);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="keywordflow">if</span> (roles != <span class="keyword">null</span> &amp;&amp; roles.Count() &gt; 0)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">return</span> roles;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa0a679bf00d7b9bdcd4c532473ea2c53">  852</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa0a679bf00d7b9bdcd4c532473ea2c53">CreateTeamRole</a>(<span class="keywordtype">string</span> role, uint teamId, <span class="keywordtype">string</span> colorCode)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;AddRoleToTeam&quot;</span>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            uint? roleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ae5f722037537d2b09850eeae0b6d3117">AddRole</a>(role, teamId, colorCode);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">TeamRole</a> teamRole = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">GetRole</a>((uint)roleId);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="keywordflow">if</span> (teamRole == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a46544b0901b6a79d306c4d3f71f25e0f">AddOrUpdateTeamRole</a>(teamRole);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac54dc19e93e51aadb561fc3f3eda9142">  880</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac54dc19e93e51aadb561fc3f3eda9142">UpdateTeamRole</a>(uint roleId, <span class="keywordtype">string</span> role, <span class="keywordtype">string</span> colorCode)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;AddRoleToTeam&quot;</span>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters roleId={roleId}, role={role}, colorCode={colorCode}&quot;</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordtype">bool</span> isSuccess = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#abaa695d221afd6a98bb1e81477daa6f3">UpdateRole</a>(roleId, role, colorCode);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">TeamRole</a> teamRole = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">GetRole</a>(roleId);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="keywordflow">if</span> (!isSuccess || teamRole == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a46544b0901b6a79d306c4d3f71f25e0f">AddOrUpdateTeamRole</a>(teamRole);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a7c3bc949dd7e9500e7c7bac424bf08d7">  907</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a7c3bc949dd7e9500e7c7bac424bf08d7">DeleteTeamRole</a>(<span class="keywordtype">string</span> role, uint teamId)</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RemoveRoleToTeam&quot;</span>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            uint? roleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aca5bf5c0c783dbb36fddfc1f5e8e6de7">RemoveRole</a>(role, teamId);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">TeamRole</a> teamRole = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">GetRole</a>((uint)roleId);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="keywordflow">if</span> (teamRole == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="keywordtype">bool</span> isSuccess = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="keywordflow">foreach</span> (var user <span class="keywordflow">in</span> await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a1582ef2a99db4d382aff1f4024527584">GetUsersWithRole</a>(teamId, role))</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                isSuccess &amp;= await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a94a8e6f8f14271fc49a5da51216d3b19">UnAssignRole</a>(role, user.Id, teamId);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">if</span> (!isSuccess)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a9ba91df570e93229b722aedb9cde676c">DeleteTeamRole</a>(teamRole);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a71b3144d6d2b7f925a4b4ca494c9b5cb">  947</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a71b3144d6d2b7f925a4b4ca494c9b5cb">AssignUserRole</a>(<span class="keywordtype">string</span> role, <span class="keywordtype">string</span> userId, uint teamId)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;AssignUserRole&quot;</span>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, userId={userId}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1User.html">User</a> user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <span class="keywordflow">if</span> (user == <span class="keyword">null</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                || team == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="keywordtype">bool</span> isSuccess = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ac7e71844865b0a106d5d36e6d0221452">AssignRole</a>(role, userId, teamId);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">if</span> (!isSuccess)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a7ffadad357607c826fc8bf5d17644570">UpdateMember</a>(user, team);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a51771daf6c6bd2db4f4ac253f9597842">  983</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a51771daf6c6bd2db4f4ac253f9597842">UnassignUserRole</a>(<span class="keywordtype">string</span> role, <span class="keywordtype">string</span> userId, uint teamId)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;UnAssignUserRole&quot;</span>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, userId={userId}, teamId={teamId}&quot;</span>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1User.html">User</a> user = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html">UserService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">GetUser</a>(userId);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> team = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>(teamId);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordflow">if</span> (user == <span class="keyword">null</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                || team == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordtype">bool</span> isSuccess = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a94a8e6f8f14271fc49a5da51216d3b19">UnAssignRole</a>(role, userId, teamId);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="keywordflow">if</span> (!isSuccess)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a7ffadad357607c826fc8bf5d17644570">UpdateMember</a>(user, team);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a31680edbab1758de675e170540c0dd78"> 1018</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a31680edbab1758de675e170540c0dd78">GrantPermission</a>(uint teamId, <span class="keywordtype">string</span> role, <a class="code" href="namespaceMessenger_1_1Core_1_1Models.html#a1019aae76184edeb4a742cff2f260be4">Permissions</a> permission)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;GrantPermission&quot;</span>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, teamId={teamId}, permission={permission}&quot;</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            uint? roleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4f904f5163e93e69a33be7677a4c71cf">GrantPermission</a>(teamId, role, permission);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordflow">if</span> (roleId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">TeamRole</a> teamRole = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">GetRole</a>((uint)roleId);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a46544b0901b6a79d306c4d3f71f25e0f">AddOrUpdateTeamRole</a>(teamRole);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae875b229f117e0c0ee800b5596302b41"> 1047</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;bool&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae875b229f117e0c0ee800b5596302b41">RevokePermission</a>(uint teamId, <span class="keywordtype">string</span> role, <a class="code" href="namespaceMessenger_1_1Core_1_1Models.html#a1019aae76184edeb4a742cff2f260be4">Permissions</a> permission)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;RevokePermission&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters role={role}, teamId={teamId}, permission={permission}&quot;</span>);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            uint? roleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a8908d1618465db976f4bcb3519e5a0e0">RevokePermission</a>(teamId, role, permission);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <span class="keywordflow">if</span> (roleId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">TeamRole</a> teamRole = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">GetRole</a>((uint)roleId);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">if</span> (teamRole == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a46544b0901b6a79d306c4d3f71f25e0f">AddOrUpdateTeamRole</a>(teamRole);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {true}&quot;</span>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="preprocessor">        #region Private Chat</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2e4f6f60829b9bc9b37451d9a06f2002"> 1084</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;uint?&gt; <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2e4f6f60829b9bc9b37451d9a06f2002">StartChat</a>(<span class="keywordtype">string</span> userId, <span class="keywordtype">string</span> targetUserId)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;StartChat&quot;</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters userId={userId}, targetUserNameId={targetUserId}&quot;</span>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(userId) &amp;&amp; <span class="keywordtype">string</span>.IsNullOrEmpty(targetUserId))</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Invalid &#39;UserId&#39;s&quot;</span>);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            uint? chatId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1PrivateChatService.html">PrivateChatService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1PrivateChatService.html#a8ed7d6d7887dc14f767a8c1361997ac1">CreatePrivateChat</a>(userId, targetUserId);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <span class="keywordflow">if</span> (chatId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Error while starting a new private chat&quot;</span>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ae5f722037537d2b09850eeae0b6d3117">AddRole</a>(<span class="stringliteral">&quot;admin&quot;</span>, chatId.Value, <span class="stringliteral">&quot;CD5C5C&quot;</span>);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ac7e71844865b0a106d5d36e6d0221452">AssignRole</a>(<span class="stringliteral">&quot;admin&quot;</span>, userId, chatId.Value);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ac7e71844865b0a106d5d36e6d0221452">AssignRole</a>(<span class="stringliteral">&quot;admin&quot;</span>, targetUserId, chatId.Value);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="comment">// Grant admin all permissions</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordtype">bool</span> grantedAllPermissions = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">foreach</span> (var permission <span class="keywordflow">in</span> Enum.GetValues(typeof(<a class="code" href="namespaceMessenger_1_1Core_1_1Models.html#a1019aae76184edeb4a742cff2f260be4">Permissions</a>)).Cast&lt;Permissions&gt;())</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                uint? teamRoleId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4f904f5163e93e69a33be7677a4c71cf">GrantPermission</a>(chatId.Value, <span class="stringliteral">&quot;admin&quot;</span>, permission);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                grantedAllPermissions &amp;= teamRoleId != <span class="keyword">null</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            uint? channelId = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">ChannelService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#ae9388aa7e8ae52ab9236e67b705cc3dc">CreateChannel</a>(<span class="stringliteral">&quot;main&quot;</span>,chatId.Value);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="keywordflow">if</span> (channelId == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not create the team&#39;s main channel&quot;</span>);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html">Team</a> chat = await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">TeamService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">GetTeam</a>((uint)chatId);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <span class="keywordflow">if</span> (chat == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;could not retrieve the team from the server&quot;</span>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: null&quot;</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Created a channel identified by ChannelId={channelId} in the team identified by TeamId={chatId.Value}&quot;</span>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aba655b98194b39e13d84804e586b0f34">JoinTeam</a>(userId, chat.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Team.html#a02c394b8983392d4bbfe1484d37e0480">Id</a>.ToString());</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            await <a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">SignalRService</a>.<a class="code" href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ad1c32727c383ca4618cc41950d28b463">CreateTeam</a>(chat);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: {chatId}&quot;</span>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">return</span> chatId;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="preprocessor">        #region Helpers</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> ValidateMessage(<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html">Message</a> message)</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;Method&quot;</span>,<span class="stringliteral">&quot;ValidateMessage&quot;</span>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            LogContext.PushProperty(<span class="stringliteral">&quot;SourceContext&quot;</span>, <span class="stringliteral">&quot;MessengerService&quot;</span>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Function called with parameters message={message}&quot;</span>);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">// Sender / Recipient Id</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">if</span> (message == <span class="keyword">null</span> || <span class="keywordtype">string</span>.IsNullOrWhiteSpace(message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a97fed67252ac0a193529ffb55b16d061">SenderId</a>))</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;message has been determined invalid&quot;</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <span class="comment">// Content</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(message.<a class="code" href="classMessenger_1_1Core_1_1Models_1_1Message.html#a746296aacb69894c78eda52a9664a0a6">Content</a>))</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;message has been determined invalid&quot;</span>);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: false&quot;</span>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="comment">// Valid</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <a class="code" href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">logger</a>.Information($<span class="stringliteral">&quot;Return value: true&quot;</span>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1GlobalLogger_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1GlobalLogger.html">Messenger.Core.Helpers.GlobalLogger</a></div><div class="ttdoc">Configures a logger to log at &lt;TempPath&gt;/BIB_VPR/log.txt</div><div class="ttdef"><b>Definition:</b> <a href="GlobalLogger_8cs_source.html#l00009">GlobalLogger.cs:10</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1GlobalLogger_html_a03dad52937c166e46982733aa24afdf1"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1GlobalLogger.html#a03dad52937c166e46982733aa24afdf1">Messenger.Core.Helpers.GlobalLogger.Instance</a></div><div class="ttdeci">static ILogger Instance</div><div class="ttdoc">The actual logger instance</div><div class="ttdef"><b>Definition:</b> <a href="GlobalLogger_8cs_source.html#l00016">GlobalLogger.cs:16</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder.html">Messenger.Core.Helpers.NotificationMessageBuilder</a></div><div class="ttdoc">Holds static methods to create notification messages from minimal information</div><div class="ttdef"><b>Definition:</b> <a href="NotificationMessageBuilder_8cs_source.html#l00012">NotificationMessageBuilder.cs:13</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder_html_ac8392674ac6a35057ee129ec78db6d81"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1NotificationMessageBuilder.html#ac8392674ac6a35057ee129ec78db6d81">Messenger.Core.Helpers.NotificationMessageBuilder.MakeInvitedToTeamNotificationMessage</a></div><div class="ttdeci">static async Task&lt; JObject &gt; MakeInvitedToTeamNotificationMessage(uint teamId)</div><div class="ttdoc">Encode information about the receiving of an invitation to a team Sets the following fields in the JO...</div><div class="ttdef"><b>Definition:</b> <a href="NotificationMessageBuilder_8cs_source.html#l00232">NotificationMessageBuilder.cs:232</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1Singleton_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1Singleton.html">Messenger.Core.Helpers.Singleton</a></div><div class="ttdoc">Represents a singleton instance holding an object</div><div class="ttdef"><b>Definition:</b> <a href="Singleton_8cs_source.html#l00010">Singleton.cs:12</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Helpers_1_1Singleton_html_a0d7f2cd0eabd1bf12e8a5aae626e7de8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Helpers_1_1Singleton.html#a0d7f2cd0eabd1bf12e8a5aae626e7de8">Messenger.Core.Helpers.Singleton.Instance</a></div><div class="ttdeci">static T Instance</div><div class="ttdoc">Access the singleton instance's type</div><div class="ttdef"><b>Definition:</b> <a href="Singleton_8cs_source.html#l00018">Singleton.cs:19</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Channel_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Channel.html">Messenger.Core.Models.Channel</a></div><div class="ttdoc">The source code side representation of a team's channel</div><div class="ttdef"><b>Definition:</b> <a href="Channel_8cs_source.html#l00006">Channel.cs:7</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html">Messenger.Core.Models.Message</a></div><div class="ttdoc">The source code side representation of a Message</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00010">Message.cs:11</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_a4f83a3ddb5cb8475351010fe724a3a3c"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#a4f83a3ddb5cb8475351010fe724a3a3c">Messenger.Core.Models.Message.Id</a></div><div class="ttdeci">uint Id</div><div class="ttdoc">The unique id of the message</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00015">Message.cs:15</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_a53e8deffa31b5af4fe93c0cc43b5b8c8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#a53e8deffa31b5af4fe93c0cc43b5b8c8">Messenger.Core.Models.Message.ParentMessageId</a></div><div class="ttdeci">uint? ParentMessageId</div><div class="ttdoc">The optional parent of the message (which this one is a reply to)</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00040">Message.cs:40</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_a746296aacb69894c78eda52a9664a0a6"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#a746296aacb69894c78eda52a9664a0a6">Messenger.Core.Models.Message.Content</a></div><div class="ttdeci">string Content</div><div class="ttdoc">The actual content of the message</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00025">Message.cs:25</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_a97fed67252ac0a193529ffb55b16d061"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#a97fed67252ac0a193529ffb55b16d061">Messenger.Core.Models.Message.SenderId</a></div><div class="ttdeci">string SenderId</div><div class="ttdoc">The id of the messages's sender</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00020">Message.cs:20</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_a9894915afacb8c77951c1d66ef06137e"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#a9894915afacb8c77951c1d66ef06137e">Messenger.Core.Models.Message.UploadFileData</a></div><div class="ttdeci">List&lt; UploadData &gt; UploadFileData</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00052">Message.cs:52</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Message_html_ae07b2c690ab85f6e2e6596ef99c24331"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Message.html#ae07b2c690ab85f6e2e6596ef99c24331">Messenger.Core.Models.Message.RecipientId</a></div><div class="ttdeci">uint RecipientId</div><div class="ttdoc">The id of the channel the message was sent to</div><div class="ttdef"><b>Definition:</b> <a href="Message_8cs_source.html#l00035">Message.cs:35</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Notification_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Notification.html">Messenger.Core.Models.Notification</a></div><div class="ttdoc">The source code side representation of a Notification</div><div class="ttdef"><b>Definition:</b> <a href="Notification_8cs_source.html#l00010">Notification.cs:11</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Reaction_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Reaction.html">Messenger.Core.Models.Reaction</a></div><div class="ttdoc">The source code side representation of a reaction to a message</div><div class="ttdef"><b>Definition:</b> <a href="Reaction_8cs_source.html#l00006">Reaction.cs:7</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1TeamRole_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1TeamRole.html">Messenger.Core.Models.TeamRole</a></div><div class="ttdoc">The source code side representation of a Role defined in a Team</div><div class="ttdef"><b>Definition:</b> <a href="TeamRole_8cs_source.html#l00006">TeamRole.cs:7</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Team_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Team.html">Messenger.Core.Models.Team</a></div><div class="ttdoc">The source code side representation of a Team</div><div class="ttdef"><b>Definition:</b> <a href="Team_8cs_source.html#l00010">Team.cs:11</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1Team_html_a02c394b8983392d4bbfe1484d37e0480"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1Team.html#a02c394b8983392d4bbfe1484d37e0480">Messenger.Core.Models.Team.Id</a></div><div class="ttdeci">uint Id</div><div class="ttdoc">The unique id of the team</div><div class="ttdef"><b>Definition:</b> <a href="Team_8cs_source.html#l00018">Team.cs:18</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1UploadData_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1UploadData.html">Messenger.Core.Models.UploadData</a></div><div class="ttdoc">Holds a Stream of data and a file path intended to safe the stream's data to</div><div class="ttdef"><b>Definition:</b> <a href="UploadData_8cs_source.html#l00011">UploadData.cs:12</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Models_1_1User_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Models_1_1User.html">Messenger.Core.Models.User</a></div><div class="ttdoc">The source code side representation of a User</div><div class="ttdef"><b>Definition:</b> <a href="User_8cs_source.html#l00009">User.cs:10</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html">Messenger.Core.Services.ChannelService</a></div><div class="ttdoc">A class holding static methods to interact with channels on the DB</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00016">ChannelService.cs:17</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html_a0f10eb2055c07b1cb10d3ce3653b2130"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a0f10eb2055c07b1cb10d3ce3653b2130">Messenger.Core.Services.ChannelService.RemoveAllChannels</a></div><div class="ttdeci">static async Task&lt; bool &gt; RemoveAllChannels(uint teamId)</div><div class="ttdoc">Deletes all channel from a specified team</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00069">ChannelService.cs:69</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html_a384e2db5887c5dcedbf123342ae2c881"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a384e2db5887c5dcedbf123342ae2c881">Messenger.Core.Services.ChannelService.RemoveChannel</a></div><div class="ttdeci">static async Task&lt; bool &gt; RemoveChannel(uint channelId)</div><div class="ttdoc">Deletes a channel with a given channelId</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00049">ChannelService.cs:49</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html_a850a1ce338b5dc2e9dfd71a578a7a1d0"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#a850a1ce338b5dc2e9dfd71a578a7a1d0">Messenger.Core.Services.ChannelService.RenameChannel</a></div><div class="ttdeci">static async Task&lt; bool &gt; RenameChannel(string channelName, uint channelId)</div><div class="ttdoc">Rename a specified channel</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00091">ChannelService.cs:91</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html_aced27456c4cba135d277f0c3f8cd4df8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#aced27456c4cba135d277f0c3f8cd4df8">Messenger.Core.Services.ChannelService.GetChannel</a></div><div class="ttdeci">static async Task&lt; Channel &gt; GetChannel(uint channelId)</div><div class="ttdoc">Construct a Channel object from data that belongs to the channel identified by channelId.</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00108">ChannelService.cs:108</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1ChannelService_html_ae9388aa7e8ae52ab9236e67b705cc3dc"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1ChannelService.html#ae9388aa7e8ae52ab9236e67b705cc3dc">Messenger.Core.Services.ChannelService.CreateChannel</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreateChannel(string channelName, uint teamId)</div><div class="ttdoc">Creates a Channel with the given name inside the specified team</div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00024">ChannelService.cs:24</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1FileSharingService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html">Messenger.Core.Services.FileSharingService</a></div><div class="ttdoc">A class holding static methods to interact with blob storage for saving and retrieving message attach...</div><div class="ttdef"><b>Definition:</b> <a href="FileSharingService_8cs_source.html#l00016">FileSharingService.cs:17</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1FileSharingService_html_a2fef494da70066b36819c8db04e57644"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html#a2fef494da70066b36819c8db04e57644">Messenger.Core.Services.FileSharingService.Delete</a></div><div class="ttdeci">static async Task&lt; bool &gt; Delete(string blobFileName)</div><div class="ttdoc">Delete a blob file</div><div class="ttdef"><b>Definition:</b> <a href="FileSharingService_8cs_source.html#l00170">FileSharingService.cs:170</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1FileSharingService_html_a55105132f467d4e4b826cb2648f4e7dc"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1FileSharingService.html#a55105132f467d4e4b826cb2648f4e7dc">Messenger.Core.Services.FileSharingService.Upload</a></div><div class="ttdeci">static async Task&lt; string &gt; Upload(UploadData uploadFile)</div><div class="ttdoc">Upload a file to the blob storage</div><div class="ttdef"><b>Definition:</b> <a href="FileSharingService_8cs_source.html#l00089">FileSharingService.cs:89</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html">Messenger.Core.Services.MessageService</a></div><div class="ttdoc">Holds static methods to interact with messages, reactions and message attachments on the DB</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00015">MessageService.cs:16</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a59979a89a47fed52370aaed56e57a359"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a59979a89a47fed52370aaed56e57a359">Messenger.Core.Services.MessageService.GetBlobFileNamesOfAttachments</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; string &gt; &gt; GetBlobFileNamesOfAttachments(uint messageId)</div><div class="ttdoc">Retrieve the Blob File Names of files attached to a specified message</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00235">MessageService.cs:235</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a5e6aee448ff9c2ef9d78ea6679eb73d9"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a5e6aee448ff9c2ef9d78ea6679eb73d9">Messenger.Core.Services.MessageService.EditMessage</a></div><div class="ttdeci">static async Task&lt; bool &gt; EditMessage(uint messageId, string newContent)</div><div class="ttdoc">Set the content of a specified message to a specified text</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00169">MessageService.cs:169</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a7091ab4d20a2f23602a4710020dff3b7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a7091ab4d20a2f23602a4710020dff3b7">Messenger.Core.Services.MessageService.RetrieveReactions</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Reaction &gt; &gt; RetrieveReactions(uint messageId)</div><div class="ttdoc">Retrieve The reactions of a message</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00349">MessageService.cs:349</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a89d9db60d865b366f1dac8720e5ed7c7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a89d9db60d865b366f1dac8720e5ed7c7">Messenger.Core.Services.MessageService.CreateMessage</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreateMessage(uint recipientsId, string senderId, string message, uint? parentMessageId=null, IEnumerable&lt; string &gt; attachmentBlobNames=null)</div><div class="ttdoc">Send a message to a specified recipient and retrieve the sent messages id. /summary&gt; param name=&quot;reci...</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00026">MessageService.cs:26</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a92c6cd5d25343849ca12038d5ae67860"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a92c6cd5d25343849ca12038d5ae67860">Messenger.Core.Services.MessageService.RemoveReaction</a></div><div class="ttdeci">static async Task&lt; bool &gt; RemoveReaction(uint messageId, string userId, string reaction)</div><div class="ttdoc">Remove a reaction from a message</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00293">MessageService.cs:293</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_a9baa767efdc37243db34bd079866316a"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#a9baa767efdc37243db34bd079866316a">Messenger.Core.Services.MessageService.DeleteMessage</a></div><div class="ttdeci">static async Task&lt; bool &gt; DeleteMessage(uint messageId)</div><div class="ttdoc">Delete a message</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00192">MessageService.cs:192</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_ac5ee6f4f0148cc9890feb30bfe047d1b"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#ac5ee6f4f0148cc9890feb30bfe047d1b">Messenger.Core.Services.MessageService.AddReaction</a></div><div class="ttdeci">static async Task&lt; uint &gt; AddReaction(uint messageId, string userId, string reaction)</div><div class="ttdoc">Add a reaction to a message</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00266">MessageService.cs:266</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_af04546bd31c5ce91f3cbad2cb9ebe5f5"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af04546bd31c5ce91f3cbad2cb9ebe5f5">Messenger.Core.Services.MessageService.RetrieveMessages</a></div><div class="ttdeci">static async Task&lt; IList&lt; Message &gt; &gt; RetrieveMessages(uint channelId)</div><div class="ttdoc">Retrieve all Messages of a channel/chat with user data of the sender</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00072">MessageService.cs:72</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessageService_html_af2ff768aacb3829e822c500adb107854"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessageService.html#af2ff768aacb3829e822c500adb107854">Messenger.Core.Services.MessageService.GetMessage</a></div><div class="ttdeci">static async Task&lt; Message &gt; GetMessage(uint messageId)</div><div class="ttdoc">Retrieve a message from a given MessageId</div><div class="ttdef"><b>Definition:</b> <a href="MessageService_8cs_source.html#l00137">MessageService.cs:137</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html">Messenger.Core.Services.MessengerService</a></div><div class="ttdoc">Holds static wrappers around other Service's methods and adds Message passing to notify other clients...</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00019">MessengerService.cs:20</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a03e8e675a894e551aeaa79629a9877d3"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a03e8e675a894e551aeaa79629a9877d3">Messenger.Core.Services.MessengerService.UpdateUserEmail</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserEmail(string userId, string newEmail)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00746">MessengerService.cs:746</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a0bbf126af4adc2b648860c94567f0acb"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a0bbf126af4adc2b648860c94567f0acb">Messenger.Core.Services.MessengerService.GetTeams</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Team &gt; &gt; GetTeams(string userId)</div><div class="ttdoc">Gets all teams the current user has membership of</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00320">MessengerService.cs:320</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a112a6e879f278a7d16a0f6b3911e500d"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a112a6e879f278a7d16a0f6b3911e500d">Messenger.Core.Services.MessengerService.CreateTeam</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreateTeam(string creatorId, string teamName, string teamDescription=&quot;&quot;)</div><div class="ttdoc">Saves new team to database, create a main channel and join the hub group of the team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00358">MessengerService.cs:358</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a194eafdd3ac6fcb3ed35b52f1b0ad1df"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a194eafdd3ac6fcb3ed35b52f1b0ad1df">Messenger.Core.Services.MessengerService.UpdateTeamName</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateTeamName(string teamName, uint teamId)</div><div class="ttdoc">Rename A team and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00434">MessengerService.cs:434</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a2491aff81294c379e49a4e7f9a6a0258"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2491aff81294c379e49a4e7f9a6a0258">Messenger.Core.Services.MessengerService.GetTeam</a></div><div class="ttdeci">static async Task&lt; Team &gt; GetTeam(uint teamId)</div><div class="ttdoc">Gets the team with the given team id</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00338">MessengerService.cs:338</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a2e4f6f60829b9bc9b37451d9a06f2002"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a2e4f6f60829b9bc9b37451d9a06f2002">Messenger.Core.Services.MessengerService.StartChat</a></div><div class="ttdeci">static async Task&lt; uint?&gt; StartChat(string userId, string targetUserId)</div><div class="ttdoc">Start a private chat between two users and notify them</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l01084">MessengerService.cs:1084</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a31680edbab1758de675e170540c0dd78"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a31680edbab1758de675e170540c0dd78">Messenger.Core.Services.MessengerService.GrantPermission</a></div><div class="ttdeci">static async Task&lt; bool &gt; GrantPermission(uint teamId, string role, Permissions permission)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l01018">MessengerService.cs:1018</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a3bf01add80c82c5d19865a5353d65e79"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a3bf01add80c82c5d19865a5353d65e79">Messenger.Core.Services.MessengerService.UpdateMessage</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateMessage(uint messageId, string newContent, uint teamId)</div><div class="ttdoc">Change a messages content and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00212">MessengerService.cs:212</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a439978fcd19b38d516b893cd9f9515a7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a439978fcd19b38d516b893cd9f9515a7">Messenger.Core.Services.MessengerService.CreateChannel</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreateChannel(string channelName, uint teamId)</div><div class="ttdoc">Add a channel to a specified team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00514">MessengerService.cs:514</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a51771daf6c6bd2db4f4ac253f9597842"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a51771daf6c6bd2db4f4ac253f9597842">Messenger.Core.Services.MessengerService.UnassignUserRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; UnassignUserRole(string role, string userId, uint teamId)</div><div class="ttdoc">Unassign a role from a team's member and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00983">MessengerService.cs:983</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a62565e9e6eac3e92e65b7ec80ef61652"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a62565e9e6eac3e92e65b7ec80ef61652">Messenger.Core.Services.MessengerService.GetReactions</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Reaction &gt; &gt; GetReactions(uint messageId)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00229">MessengerService.cs:229</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a634d8a2e7a0e69c93627309674d514d6"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a634d8a2e7a0e69c93627309674d514d6">Messenger.Core.Services.MessengerService.Initialize</a></div><div class="ttdeci">static async Task&lt; IList&lt; Team &gt; &gt; Initialize(string userId, string connectionString=null)</div><div class="ttdoc">Connects the given user to the teams he is a member of</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00036">MessengerService.cs:36</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a65cf5588551168c6535da06de1cb55fa"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a65cf5588551168c6535da06de1cb55fa">Messenger.Core.Services.MessengerService.logger</a></div><div class="ttdeci">static ILogger logger</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00026">MessengerService.cs:26</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a70dac26bef9f6990e399b887af88c401"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a70dac26bef9f6990e399b887af88c401">Messenger.Core.Services.MessengerService.RemoveMember</a></div><div class="ttdeci">static async Task&lt; bool &gt; RemoveMember(string userId, uint teamId)</div><div class="ttdoc">Removes a user from a specific team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00713">MessengerService.cs:713</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a71b3144d6d2b7f925a4b4ca494c9b5cb"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a71b3144d6d2b7f925a4b4ca494c9b5cb">Messenger.Core.Services.MessengerService.AssignUserRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; AssignUserRole(string role, string userId, uint teamId)</div><div class="ttdoc">Assign a role to a team's member and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00947">MessengerService.cs:947</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a77ef5dd21275ec31699255e8333d9d36"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a77ef5dd21275ec31699255e8333d9d36">Messenger.Core.Services.MessengerService.CreateMessageReaction</a></div><div class="ttdeci">static async Task&lt; Reaction &gt; CreateMessageReaction(uint messageId, string userId, uint teamId, string reaction)</div><div class="ttdoc">Add a reaction to a message and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00249">MessengerService.cs:249</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a7c3bc949dd7e9500e7c7bac424bf08d7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a7c3bc949dd7e9500e7c7bac424bf08d7">Messenger.Core.Services.MessengerService.DeleteTeamRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; DeleteTeamRole(string role, uint teamId)</div><div class="ttdoc">Remove a role from a team's available roles and all members roles and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00907">MessengerService.cs:907</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a80ae9c3ea6da61093a916f209cd17ab5"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a80ae9c3ea6da61093a916f209cd17ab5">Messenger.Core.Services.MessengerService.GetChannelsForTeam</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Channel &gt; &gt; GetChannelsForTeam(uint teamId)</div><div class="ttdoc">Gets all channels from a team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00590">MessengerService.cs:590</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a8ee0203eb531c86cfaec43beb5484e5b"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a8ee0203eb531c86cfaec43beb5484e5b">Messenger.Core.Services.MessengerService.SendMessage</a></div><div class="ttdeci">static async Task&lt; bool &gt; SendMessage(Message message, uint teamId)</div><div class="ttdoc">Saves the message to the database and simultaneously broadcasts to the connected Signal-R hub</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00119">MessengerService.cs:119</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a9738b95bd73dfddb38fb8c0e78f75829"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9738b95bd73dfddb38fb8c0e78f75829">Messenger.Core.Services.MessengerService.GetRolesList</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; TeamRole &gt; &gt; GetRolesList(uint teamId, string userId)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00831">MessengerService.cs:831</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a99ad70a09c5547faecddf248c8146266"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a99ad70a09c5547faecddf248c8146266">Messenger.Core.Services.MessengerService.UpdateUserBio</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserBio(string userId, string newBio)</div><div class="ttdoc">Update A user's bio</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00792">MessengerService.cs:792</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_a9a9ee61c44d1255f0913e617ed04aeda"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#a9a9ee61c44d1255f0913e617ed04aeda">Messenger.Core.Services.MessengerService.UpdateUserPhoto</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserPhoto(string userId, string newPhotoURL)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00814">MessengerService.cs:814</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_aa0a679bf00d7b9bdcd4c532473ea2c53"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa0a679bf00d7b9bdcd4c532473ea2c53">Messenger.Core.Services.MessengerService.CreateTeamRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; CreateTeamRole(string role, uint teamId, string colorCode)</div><div class="ttdoc">Add a role to a team with the specified teamId and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00852">MessengerService.cs:852</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_aa4efb7021eae3d556c8f8ec858613e43"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa4efb7021eae3d556c8f8ec858613e43">Messenger.Core.Services.MessengerService.GetUserWithNameId</a></div><div class="ttdeci">static async Task&lt; User &gt; GetUserWithNameId(string username, uint nameId)</div><div class="ttdoc">Returns a user by username and nameId</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00632">MessengerService.cs:632</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_aa5e022419ec275539459420f0f144619"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa5e022419ec275539459420f0f144619">Messenger.Core.Services.MessengerService.RenameChannel</a></div><div class="ttdeci">static async Task&lt; bool &gt; RenameChannel(string channelName, uint channelId)</div><div class="ttdoc">Rename A channel and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00567">MessengerService.cs:567</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_aa690d0e394ac175474fb41e071822677"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aa690d0e394ac175474fb41e071822677">Messenger.Core.Services.MessengerService.SendInvitation</a></div><div class="ttdeci">static async Task&lt; bool &gt; SendInvitation(string userId, uint teamId)</div><div class="ttdoc">Saves new membership to database and add the user to the hub group of the team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00652">MessengerService.cs:652</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ab01f2292133ce2d756c758899ef30dc7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ab01f2292133ce2d756c758899ef30dc7">Messenger.Core.Services.MessengerService.DeleteTeam</a></div><div class="ttdeci">static async Task&lt; Team &gt; DeleteTeam(uint teamId)</div><div class="ttdoc">Delete a team alongside it's channels and memberships</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00456">MessengerService.cs:456</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_abab5dfc717e70a1c8acb5e25981fe19a"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#abab5dfc717e70a1c8acb5e25981fe19a">Messenger.Core.Services.MessengerService.GetMessages</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Message &gt; &gt; GetMessages(uint channelId)</div><div class="ttdoc">Gets all messages of the team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00086">MessengerService.cs:86</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ac2a043d3fe88d76974f1c980dc20d320"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac2a043d3fe88d76974f1c980dc20d320">Messenger.Core.Services.MessengerService.GetMessage</a></div><div class="ttdeci">static async Task&lt; Message &gt; GetMessage(uint messageId)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00100">MessengerService.cs:100</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ac54dc19e93e51aadb561fc3f3eda9142"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ac54dc19e93e51aadb561fc3f3eda9142">Messenger.Core.Services.MessengerService.UpdateTeamRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateTeamRole(uint roleId, string role, string colorCode)</div><div class="ttdoc">Update team's role with the specified teamId and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00880">MessengerService.cs:880</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ad3d3c6f0b20b3762ced93658bdc76055"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ad3d3c6f0b20b3762ced93658bdc76055">Messenger.Core.Services.MessengerService.UpdateTeamDescription</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateTeamDescription(string teamDescription, uint teamId)</div><div class="ttdoc">Change a specified team's description and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00491">MessengerService.cs:491</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_adc8b726c3ce2e48801aa22b7074a8e5a"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#adc8b726c3ce2e48801aa22b7074a8e5a">Messenger.Core.Services.MessengerService.DeleteMessageReaction</a></div><div class="ttdeci">static async Task&lt; Reaction &gt; DeleteMessageReaction(uint messageId, string userId, uint teamId, string reaction)</div><div class="ttdoc">Remove a reaction from a message and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00282">MessengerService.cs:282</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ae19f1d2a853d7afc9c0ea0aee96bcd8c"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae19f1d2a853d7afc9c0ea0aee96bcd8c">Messenger.Core.Services.MessengerService.DeleteMessage</a></div><div class="ttdeci">static async Task&lt; bool &gt; DeleteMessage(uint messageId, uint teamId)</div><div class="ttdoc">Delete a Message and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00176">MessengerService.cs:176</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ae1ae15e99206f5fdea267b84b00dfd58"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae1ae15e99206f5fdea267b84b00dfd58">Messenger.Core.Services.MessengerService.GetTeamMembers</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; User &gt; &gt; GetTeamMembers(uint teamId)</div><div class="ttdoc">Gets all users in current Team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00612">MessengerService.cs:612</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_ae875b229f117e0c0ee800b5596302b41"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#ae875b229f117e0c0ee800b5596302b41">Messenger.Core.Services.MessengerService.RevokePermission</a></div><div class="ttdeci">static async Task&lt; bool &gt; RevokePermission(uint teamId, string role, Permissions permission)</div><div class="ttdoc">Revoke a permission from a specified team's role and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l01047">MessengerService.cs:1047</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_aeef9238a7ed6bcd0bd1a5d4c2031b443"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#aeef9238a7ed6bcd0bd1a5d4c2031b443">Messenger.Core.Services.MessengerService.DeleteChannel</a></div><div class="ttdeci">static async Task&lt; Channel &gt; DeleteChannel(uint channelId)</div><div class="ttdoc">Remove a specified channel from it's team</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00544">MessengerService.cs:544</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1MessengerService_html_af39da3130ead71c475843f078e776256"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1MessengerService.html#af39da3130ead71c475843f078e776256">Messenger.Core.Services.MessengerService.UpdateUserUsername</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserUsername(string userId, string newUsername)</div><div class="ttdef"><b>Definition:</b> <a href="MessengerService_8cs_source.html#l00769">MessengerService.cs:769</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1NotificationService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1NotificationService.html">Messenger.Core.Services.NotificationService</a></div><div class="ttdoc">Holds helpers and static methods to interact with notifications in the DB</div><div class="ttdef"><b>Definition:</b> <a href="NotificationService_8cs_source.html#l00015">NotificationService.cs:16</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1NotificationService_html_a894dd1988c7594206cc04578b85fb52d"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1NotificationService.html#a894dd1988c7594206cc04578b85fb52d">Messenger.Core.Services.NotificationService.SendNotification</a></div><div class="ttdeci">static async Task&lt; uint?&gt; SendNotification(string recipientId, JObject message)</div><div class="ttdoc">Send a notification to a specified user</div><div class="ttdef"><b>Definition:</b> <a href="NotificationService_8cs_source.html#l00025">NotificationService.cs:25</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1PrivateChatService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1PrivateChatService.html">Messenger.Core.Services.PrivateChatService</a></div><div class="ttdoc">Holds helpers and static methods to interact with private chats on the DB</div><div class="ttdef"><b>Definition:</b> <a href="PrivateChatService_8cs_source.html#l00018">PrivateChatService.cs:19</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1PrivateChatService_html_a8ed7d6d7887dc14f767a8c1361997ac1"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1PrivateChatService.html#a8ed7d6d7887dc14f767a8c1361997ac1">Messenger.Core.Services.PrivateChatService.CreatePrivateChat</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreatePrivateChat(string myUserId, string otherUserId)</div><div class="ttdoc">Create a private chat between the users identified by myUserId and otherUserId.</div><div class="ttdef"><b>Definition:</b> <a href="PrivateChatService_8cs_source.html#l00026">PrivateChatService.cs:26</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html">Messenger.Core.Services.SignalRService</a></div><div class="ttdoc">Holds definitions for messages to send to the signalR hub</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00015">SignalRService.cs:16</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a004748ef7c1f25241d192f89a48d02f2"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a004748ef7c1f25241d192f89a48d02f2">Messenger.Core.Services.SignalRService.DeleteTeam</a></div><div class="ttdeci">async Task DeleteTeam(Team team)</div><div class="ttdoc">Delete a team and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00343">SignalRService.cs:343</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a048ca72ded57e483b972f7989d67be21"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a048ca72ded57e483b972f7989d67be21">Messenger.Core.Services.SignalRService.SendInvitation</a></div><div class="ttdeci">async Task SendInvitation(User user, Team team)</div><div class="ttdoc">Send a user an invitation to a team and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00458">SignalRService.cs:458</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a1aee81da19161b62727e27928dae7e54"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a1aee81da19161b62727e27928dae7e54">Messenger.Core.Services.SignalRService.OpenConnection</a></div><div class="ttdeci">async Task OpenConnection(string userId)</div><div class="ttdoc">Starts the connection with the preset</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00107">SignalRService.cs:107</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a36a590a0333843e932caea44065533db"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a36a590a0333843e932caea44065533db">Messenger.Core.Services.SignalRService.UpdateChannel</a></div><div class="ttdeci">async Task UpdateChannel(Channel channel)</div><div class="ttdoc">Update a channel and and notify other clients other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00381">SignalRService.cs:381</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a46544b0901b6a79d306c4d3f71f25e0f"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a46544b0901b6a79d306c4d3f71f25e0f">Messenger.Core.Services.SignalRService.AddOrUpdateTeamRole</a></div><div class="ttdeci">async Task AddOrUpdateTeamRole(TeamRole role)</div><div class="ttdoc">Add or update a team role and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00419">SignalRService.cs:419</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a581b9141a95ba76a60d961f514e615a8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a581b9141a95ba76a60d961f514e615a8">Messenger.Core.Services.SignalRService.UpdateMessageReactions</a></div><div class="ttdeci">async Task UpdateMessageReactions(Message message, uint teamId)</div><div class="ttdoc">Update a message's reactions and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00283">SignalRService.cs:283</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a59c0097a80abef4c636a0477e2016791"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a59c0097a80abef4c636a0477e2016791">Messenger.Core.Services.SignalRService.UpdateTeam</a></div><div class="ttdeci">async Task UpdateTeam(Team team)</div><div class="ttdoc">Update a team's data and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00326">SignalRService.cs:326</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a6c39835894af32e050e7c77c161fef68"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a6c39835894af32e050e7c77c161fef68">Messenger.Core.Services.SignalRService.SendMessage</a></div><div class="ttdeci">async Task SendMessage(Message message, uint teamId)</div><div class="ttdoc">Sends a message to a hub group</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00227">SignalRService.cs:227</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a7ffadad357607c826fc8bf5d17644570"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a7ffadad357607c826fc8bf5d17644570">Messenger.Core.Services.SignalRService.UpdateMember</a></div><div class="ttdeci">async Task UpdateMember(User user, Team team)</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00488">SignalRService.cs:488</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a9ba91df570e93229b722aedb9cde676c"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a9ba91df570e93229b722aedb9cde676c">Messenger.Core.Services.SignalRService.DeleteTeamRole</a></div><div class="ttdeci">async Task DeleteTeamRole(TeamRole role)</div><div class="ttdoc">Delete a team role and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00436">SignalRService.cs:436</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_a9c752d12a6fc38712f7a1e75c1c50ade"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#a9c752d12a6fc38712f7a1e75c1c50ade">Messenger.Core.Services.SignalRService.CreateChannel</a></div><div class="ttdeci">async Task CreateChannel(Channel channel)</div><div class="ttdoc">Create a channel and and notify other clients other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00364">SignalRService.cs:364</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_aad61da6c4bea9555625dd0b1542059e4"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aad61da6c4bea9555625dd0b1542059e4">Messenger.Core.Services.SignalRService.Initialize</a></div><div class="ttdeci">void Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00055">SignalRService.cs:55</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_aaf50de35c5aaf275e3a04c2888995ee8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aaf50de35c5aaf275e3a04c2888995ee8">Messenger.Core.Services.SignalRService.UpdateUser</a></div><div class="ttdeci">async Task UpdateUser(User user)</div><div class="ttdoc">Update a user's data and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00527">SignalRService.cs:527</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_ab32779f00eba8b3b135b5d44eecbf329"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab32779f00eba8b3b135b5d44eecbf329">Messenger.Core.Services.SignalRService.RemoveMember</a></div><div class="ttdeci">async Task RemoveMember(User user, Team team)</div><div class="ttdoc">Remove a member from a team and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00506">SignalRService.cs:506</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_ab5c5ca0878e7e9ae5e04e6323cdc251d"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab5c5ca0878e7e9ae5e04e6323cdc251d">Messenger.Core.Services.SignalRService.UpdateMessage</a></div><div class="ttdeci">async Task UpdateMessage(Message message, uint teamId)</div><div class="ttdoc">Update a message's data and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00247">SignalRService.cs:247</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_ab9abb703a9beab10d43d6d02cfcf61a2"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ab9abb703a9beab10d43d6d02cfcf61a2">Messenger.Core.Services.SignalRService.DeleteChannel</a></div><div class="ttdeci">async Task DeleteChannel(Channel channel)</div><div class="ttdoc">Delete a channel and and notify other clients other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00398">SignalRService.cs:398</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_aba655b98194b39e13d84804e586b0f34"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#aba655b98194b39e13d84804e586b0f34">Messenger.Core.Services.SignalRService.JoinTeam</a></div><div class="ttdeci">async Task JoinTeam(string userId, string teamId)</div><div class="ttdoc">Joins a hub group with the current connection id</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00157">SignalRService.cs:157</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_ad1c32727c383ca4618cc41950d28b463"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#ad1c32727c383ca4618cc41950d28b463">Messenger.Core.Services.SignalRService.CreateTeam</a></div><div class="ttdeci">async Task CreateTeam(Team team)</div><div class="ttdoc">Adds the user to the hub group</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00309">SignalRService.cs:309</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_af3662fa4966a99e3a1010fe071e8f690"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#af3662fa4966a99e3a1010fe071e8f690">Messenger.Core.Services.SignalRService.SendNotificationToUser</a></div><div class="ttdeci">async Task SendNotificationToUser(Notification notification)</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00205">SignalRService.cs:205</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1SignalRService_html_afb8a4fb96fd86c9b73618fd71888b95c"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1SignalRService.html#afb8a4fb96fd86c9b73618fd71888b95c">Messenger.Core.Services.SignalRService.DeleteMessage</a></div><div class="ttdeci">async Task DeleteMessage(Message message, uint teamId)</div><div class="ttdoc">Delete a message and notify other clients</div><div class="ttdef"><b>Definition:</b> <a href="SignalRService_8cs_source.html#l00265">SignalRService.cs:265</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html">Messenger.Core.Services.TeamService</a></div><div class="ttdoc">Holds helpers and static methods to interact with teams on the DB, including permissions,...</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00016">TeamService.cs:17</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a1582ef2a99db4d382aff1f4024527584"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a1582ef2a99db4d382aff1f4024527584">Messenger.Core.Services.TeamService.GetUsersWithRole</a></div><div class="ttdeci">static async Task&lt; IList&lt; User &gt; &gt; GetUsersWithRole(uint teamId, string role)</div><div class="ttdoc">Retrieve a team's users that have a specified role</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00650">TeamService.cs:650</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a19c94e4d0833b3713482f344c5d98fec"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a19c94e4d0833b3713482f344c5d98fec">Messenger.Core.Services.TeamService.RemoveMember</a></div><div class="ttdeci">static async Task&lt; bool &gt; RemoveMember(string userId, uint teamId)</div><div class="ttdoc">Removes a member from the team</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00336">TeamService.cs:336</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a250de2dabac7790655a8888d04ff13fe"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a250de2dabac7790655a8888d04ff13fe">Messenger.Core.Services.TeamService.CreateTeam</a></div><div class="ttdeci">static async Task&lt; uint?&gt; CreateTeam(string teamName, string teamDescription=&quot;&quot;)</div><div class="ttdoc">Creates a team with the given name and description and retrieve the new team's id.</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00026">TeamService.cs:26</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a3280e25fe2932519743b83161a423624"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a3280e25fe2932519743b83161a423624">Messenger.Core.Services.TeamService.GetAllChannelsByTeamId</a></div><div class="ttdeci">static async Task&lt; IList&lt; Channel &gt; &gt; GetAllChannelsByTeamId(uint teamId)</div><div class="ttdoc">Retrieve all channels of a team</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00420">TeamService.cs:420</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a455351a1c7e584a9a67932fe3e2a4ec4"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a455351a1c7e584a9a67932fe3e2a4ec4">Messenger.Core.Services.TeamService.ChangeTeamName</a></div><div class="ttdeci">static async Task&lt; bool &gt; ChangeTeamName(uint teamId, string teamName)</div><div class="ttdoc">Change the specified teams name</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00139">TeamService.cs:139</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a4b0651f74678710a739ee75884aaa075"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4b0651f74678710a739ee75884aaa075">Messenger.Core.Services.TeamService.DeleteTeam</a></div><div class="ttdeci">static async Task&lt; bool &gt; DeleteTeam(uint teamId)</div><div class="ttdoc">Deletes a team with a given team id.</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00079">TeamService.cs:79</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a4f904f5163e93e69a33be7677a4c71cf"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a4f904f5163e93e69a33be7677a4c71cf">Messenger.Core.Services.TeamService.GrantPermission</a></div><div class="ttdeci">static async Task&lt; uint?&gt; GrantPermission(uint teamId, string role, Permissions permission)</div><div class="ttdoc">Grant a team's role a specified permissions</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00713">TeamService.cs:713</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a71e7113d4f2bf94929884d5cbb5ca7df"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a71e7113d4f2bf94929884d5cbb5ca7df">Messenger.Core.Services.TeamService.AddMember</a></div><div class="ttdeci">static async Task&lt; bool &gt; AddMember(string userId, uint teamId)</div><div class="ttdoc">Adds a new member to the team</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00273">TeamService.cs:273</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a8908d1618465db976f4bcb3519e5a0e0"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a8908d1618465db976f4bcb3519e5a0e0">Messenger.Core.Services.TeamService.RevokePermission</a></div><div class="ttdeci">static async Task&lt; uint?&gt; RevokePermission(uint teamId, string role, Permissions permission)</div><div class="ttdoc">Revoke a permission from a specified team's role</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00780">TeamService.cs:780</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_a94a8e6f8f14271fc49a5da51216d3b19"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#a94a8e6f8f14271fc49a5da51216d3b19">Messenger.Core.Services.TeamService.UnAssignRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; UnAssignRole(string role, string userId, uint teamId)</div><div class="ttdoc">Unassign a team's member a role</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00588">TeamService.cs:588</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_aa57d048a3cfd663ed2cb88eee57e0f12"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aa57d048a3cfd663ed2cb88eee57e0f12">Messenger.Core.Services.TeamService.GetAllMembers</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; User &gt; &gt; GetAllMembers(uint teamId)</div><div class="ttdoc">Retrieve all user who are members of the specified team</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00390">TeamService.cs:390</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_ab431c7fd69522089e69c7c2e3398e953"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ab431c7fd69522089e69c7c2e3398e953">Messenger.Core.Services.TeamService.GetUsersRoles</a></div><div class="ttdeci">static async Task&lt; IList&lt; TeamRole &gt; &gt; GetUsersRoles(uint teamId, string userId)</div><div class="ttdoc">Retrieve a users roles in a specified team</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00679">TeamService.cs:679</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_abaa695d221afd6a98bb1e81477daa6f3"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#abaa695d221afd6a98bb1e81477daa6f3">Messenger.Core.Services.TeamService.UpdateRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateRole(uint roleId, string role, string colorCode)</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00463">TeamService.cs:463</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_ac7e71844865b0a106d5d36e6d0221452"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ac7e71844865b0a106d5d36e6d0221452">Messenger.Core.Services.TeamService.AssignRole</a></div><div class="ttdeci">static async Task&lt; bool &gt; AssignRole(string role, string userId, uint teamId)</div><div class="ttdoc">Assign a team's member a role</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00548">TeamService.cs:548</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_aca5bf5c0c783dbb36fddfc1f5e8e6de7"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aca5bf5c0c783dbb36fddfc1f5e8e6de7">Messenger.Core.Services.TeamService.RemoveRole</a></div><div class="ttdeci">static async Task&lt; uint?&gt; RemoveRole(string role, uint teamId)</div><div class="ttdoc">Remove a role from a team's available roles</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00488">TeamService.cs:488</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_ad0fbb59d504d0bcba5a0be169e7755be"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ad0fbb59d504d0bcba5a0be169e7755be">Messenger.Core.Services.TeamService.GetAllTeamsByUserId</a></div><div class="ttdeci">static async Task&lt; IEnumerable&lt; Team &gt; &gt; GetAllTeamsByUserId(string userId)</div><div class="ttdoc">Gets the list of teams the user has a membership of.</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00243">TeamService.cs:243</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_ae5f722037537d2b09850eeae0b6d3117"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#ae5f722037537d2b09850eeae0b6d3117">Messenger.Core.Services.TeamService.AddRole</a></div><div class="ttdeci">static async Task&lt; uint?&gt; AddRole(string role, uint teamId, string colorCode)</div><div class="ttdoc">Add a role to a team with the specified teamId</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00443">TeamService.cs:443</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_aeddc05b8cae12801dd4360a3425609c1"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#aeddc05b8cae12801dd4360a3425609c1">Messenger.Core.Services.TeamService.GetRole</a></div><div class="ttdeci">static async Task&lt; TeamRole &gt; GetRole(uint roleId)</div><div class="ttdoc">Build a role object from a specified roleId</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00512">TeamService.cs:512</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_afb5b3ce75e4fd6ff9f425d03a405c785"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afb5b3ce75e4fd6ff9f425d03a405c785">Messenger.Core.Services.TeamService.GetTeam</a></div><div class="ttdeci">static async Task&lt; Team &gt; GetTeam(uint teamId)</div><div class="ttdoc">Gets the team with the given team id</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00216">TeamService.cs:216</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1TeamService_html_afc9dcbc65164fe083249096e35bb0b3e"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1TeamService.html#afc9dcbc65164fe083249096e35bb0b3e">Messenger.Core.Services.TeamService.ChangeTeamDescription</a></div><div class="ttdeci">static async Task&lt; bool &gt; ChangeTeamDescription(uint teamId, string description)</div><div class="ttdoc">Change the specified teams description</div><div class="ttdef"><b>Definition:</b> <a href="TeamService_8cs_source.html#l00171">TeamService.cs:171</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html">Messenger.Core.Services.UserService</a></div><div class="ttdoc">Holds helpers and static methods to interact with users on the DB</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00016">UserService.cs:17</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html_a0056d218815cf8f2c92a5b5840552199"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a0056d218815cf8f2c92a5b5840552199">Messenger.Core.Services.UserService.UpdateUsername</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUsername(string userId, string newUsername)</div><div class="ttdoc">Update a specified users name /summary&gt; The id of the user, whose name will be updatedThe new usernam...</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00063">UserService.cs:63</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html_a3755811adc98c86c8434f57a785acdb8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a3755811adc98c86c8434f57a785acdb8">Messenger.Core.Services.UserService.UpdateUserPhoto</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserPhoto(string userId, string newPhoto)</div><div class="ttdoc">Update a specified users photo /summary&gt; The id of the user, whose photo will be updatedThe new photo...</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00130">UserService.cs:130</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html_a5c83744b1bb2d6e804cf882fba5aa4c2"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html#a5c83744b1bb2d6e804cf882fba5aa4c2">Messenger.Core.Services.UserService.UpdateUserBio</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserBio(string userId, string newBio)</div><div class="ttdoc">Update a specified users bio /summary&gt; The id of the user, whose bio will be updatedThe new bio to se...</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00156">UserService.cs:156</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html_accfe05fb1b2837328b6ec4317fb895c8"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html#accfe05fb1b2837328b6ec4317fb895c8">Messenger.Core.Services.UserService.UpdateUserMail</a></div><div class="ttdeci">static async Task&lt; bool &gt; UpdateUserMail(string userId, string newMail)</div><div class="ttdoc">Update a specified users email /summary&gt; The id of the user, whose email will be updatedThe new email...</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00105">UserService.cs:105</a></div></div>
<div class="ttc" id="aclassMessenger_1_1Core_1_1Services_1_1UserService_html_ae284599a84ca261552fd06ed48fcbdfb"><div class="ttname"><a href="classMessenger_1_1Core_1_1Services_1_1UserService.html#ae284599a84ca261552fd06ed48fcbdfb">Messenger.Core.Services.UserService.GetUser</a></div><div class="ttdeci">static async Task&lt; User &gt; GetUser(string userId)</div><div class="ttdoc">Construct a User object from data that belongs to the user identified by userId.</div><div class="ttdef"><b>Definition:</b> <a href="UserService_8cs_source.html#l00301">UserService.cs:301</a></div></div>
<div class="ttc" id="anamespaceMessenger_1_1Core_1_1Helpers_html"><div class="ttname"><a href="namespaceMessenger_1_1Core_1_1Helpers.html">Messenger.Core.Helpers</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalLogger_8cs_source.html#l00004">GlobalLogger.cs:5</a></div></div>
<div class="ttc" id="anamespaceMessenger_1_1Core_1_1Models_html"><div class="ttname"><a href="namespaceMessenger_1_1Core_1_1Models.html">Messenger.Core.Models</a></div><div class="ttdef"><b>Definition:</b> <a href="Channel_8cs_source.html#l00001">Channel.cs:2</a></div></div>
<div class="ttc" id="anamespaceMessenger_1_1Core_1_1Models_html_a1019aae76184edeb4a742cff2f260be4"><div class="ttname"><a href="namespaceMessenger_1_1Core_1_1Models.html#a1019aae76184edeb4a742cff2f260be4">Messenger.Core.Models.Permissions</a></div><div class="ttdeci">Permissions</div><div class="ttdoc">Holds permissions assignable to a team's roles</div><div class="ttdef"><b>Definition:</b> <a href="Permissions_8cs_source.html#l00006">Permissions.cs:7</a></div></div>
<div class="ttc" id="anamespaceMessenger_1_1Core_1_1Services_html"><div class="ttname"><a href="namespaceMessenger_1_1Core_1_1Services.html">Messenger.Core.Services</a></div><div class="ttdef"><b>Definition:</b> <a href="ChannelService_8cs_source.html#l00011">ChannelService.cs:12</a></div></div>
<div class="ttc" id="anamespaceMessenger_1_1Core_html"><div class="ttname"><a href="namespaceMessenger_1_1Core.html">Messenger.Core</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalLogger_8cs_source.html#l00004">GlobalLogger.cs:5</a></div></div>
<div class="ttc" id="anamespaceMessenger_html"><div class="ttname"><a href="namespaceMessenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="ActivationHandler_8cs_source.html#l00004">ActivationHandler.cs:5</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1dc1e69466d8ce14c9524a2d7b0dcec3.html">Messenger</a></li><li class="navelem"><a class="el" href="dir_2e56169ecea1b8a296d35fd8bf5840e9.html">Messenger.Core</a></li><li class="navelem"><a class="el" href="dir_3bbf32dde2d886e83e76ac00ef903c56.html">Services</a></li><li class="navelem"><a class="el" href="MessengerService_8cs.html">MessengerService.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
